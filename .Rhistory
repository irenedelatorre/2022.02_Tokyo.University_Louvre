get_pwd()
getwd()
library(dplyr)
library(readxl)
install.packages("readxl")
library(readxl)
library(readxl)
library(readr)
library(readxl)
install.packages("tidyverse")
install.packages("tidyverse")
library(readxl)
library(readxl)
devtools::install_github("tidyverse/readxl")
install.packages("devtools")
devtools::install_github("tidyverse/readxl")
remove.packages("readxl", lib="~/R/win-library/4.0")
install.packages("readxl")
instakk
install.packages("Rtools")
library(readxl)
detach("package:readr", unload = TRUE)
detach("package:readxl", unload = TRUE)
install.Rtools(check = TRUE, check_r_update = TRUE, GUI = TRUE, ...)
install.Rtools()
Sys.getenv()['PATH']
library(readr)
library(readxl)
library(readr)
library(readr)
library(readr)
library(readxl)
# Room data --------------------------------------------------------------------
Louvre_network_Wi_Fi_miyajima_200528fin <- read_excel(
paste0(
source,
"Rooms.Access.Points/Louvre_network+Wi-Fi_miyajima_200528fin.xlsx"
)
)
# Room data --------------------------------------------------------------------
f2_Louvre_network_Wi_Fi_miyajima_200528fin <- read_excel(
paste0(
source,
"Rooms.Access.Points/Louvre_network+Wi-Fi_miyajima_200528fin.xlsx"
)
)
remove(Louvre_network_Wi_Fi_miyajima_200528fin)
summary(f2_Louvre_network_Wi_Fi_miyajima_200528fin)
# Room data --------------------------------------------------------------------
f2_Louvre_network_Wi_Fi_miyajima_200528fin <- read_excel(
paste0(
source,
"Rooms.Access.Points/Louvre_network+Wi-Fi_miyajima_200528fin.xlsx"
)
) %>%
rename(id_ap_1 = "ID_Access_Point")
install.packages("dplyr")
# Room data --------------------------------------------------------------------
f2_Louvre_network_Wi_Fi_miyajima_200528fin <- read_excel(
paste0(
source,
"Rooms.Access.Points/Louvre_network+Wi-Fi_miyajima_200528fin.xlsx"
)
) %>%
rename(id_ap_1 = "ID_Access_Point")
f2_Louvre_network_Wi_Fi_miyajima_200528fin <- f2_Louvre_network_Wi_Fi_miyajima_200528fin %>%
rename(id_ap_1 = "ID_Access_Point")
library(dplyr)
f2_Louvre_network_Wi_Fi_miyajima_200528fin <- f2_Louvre_network_Wi_Fi_miyajima_200528fin %>%
rename(id_ap_1 = "ID_Access_Point")
# Room data --------------------------------------------------------------------
f2_Louvre_network_Wi_Fi_miyajima_200528fin <- read_excel(
paste0(
source,
"Rooms.Access.Points/Louvre_network+Wi-Fi_miyajima_200528fin.xlsx"
)
) %>%
rename(id_ap_1 = "ID_Access_Point")
summary(Fi_rename_miyajima_200528fin)
summary(f3_Wi-Fi_rename_miyajima_200528fin)
f3_Wi-Fi_rename_miyajima_200528fin <- read_excel(
paste0(
source,
"Rooms.Access.Points/Wi-Fi_rename_miyajima_200528fin.xlsx"
)
)
f3_WiFi_rename_miyajima_200528fin <- read_excel(
paste0(
source,
"Rooms.Access.Points/Wi-Fi_rename_miyajima_200528fin.xlsx"
)
)
summary(f3_WiFi_rename_miyajima_200528fin)
f3_WiFi_rename_miyajima_200528fin <- read_excel(
paste0(
source,
"Rooms.Access.Points/Wi-Fi_rename_miyajima_200528fin.xlsx"
)
) %>%
rename(id_ap_1 = "No.") %>%
select(c(id_ap_1, memo, mac))
View(f3_WiFi_rename_miyajima_200528fin)
f4_WIFI_LOUVRE_TRUE <- read_excel(
paste0(
source,
"Rooms.Access.Points/WIFI_LOUVRE_TRUE.xlsx"
)
)
summary(f4_WIFI_LOUVRE_TRUE)
f4_WIFI_LOUVRE_TRUE <- read_excel(
paste0(source, "Rooms.Access.Points/WIFI_LOUVRE_TRUE.xlsx")
) %>%
rename(
id_ap_2 = Borne,
mac = "MAC ETCH",
mac_radio = "MAC Radio",
location = "Emplacement")
f4_WIFI_LOUVRE_TRUE <- read_excel(
paste0(source, "Rooms.Access.Points/WIFI_LOUVRE_TRUE.xlsx")
) %>%
rename(
id_ap_2 = Borne,
mac = "MAC ETH",
mac_radio = "MAC Radio",
location = "Emplacement")
f4_WIFI_LOUVRE_TRUE <- read_excel(
paste0(source, "Rooms.Access.Points/WIFI_LOUVRE_TRUE.xlsx")
) %>%
rename(
id_ap_2 = Borne,
mac = "MAC ETH",
mac_radio = "range MAC Radio",
location = "Emplacement")
f4_WIFI_LOUVRE_TRUE <- read_excel(
paste0(source, "Rooms.Access.Points/WIFI_LOUVRE_TRUE.xlsx")
) %>%
rename(
id_ap_2 = Borne,
mac = "MAC ETH",
mac_radio = "range MAC Radio",
location = "Emplacement") %>%
select(c(id_ap_2, mac, mac_radio, location))
id_1_2_matched <- merge(
f3_WiFi_rename_miyajima_200528fin,
f4_WIFI_LOUVRE_TRUE,
by = mac)
View(f3_WiFi_rename_miyajima_200528fin)
View(f4_WIFI_LOUVRE_TRUE)
id_1_2_matched <- merge(
f3_WiFi_rename_miyajima_200528fin,
f4_WIFI_LOUVRE_TRUE,
by = "mac")
f6_id_1_2_matched <- merge(
f3_WiFi_rename_miyajima_200528fin,
f4_WIFI_LOUVRE_TRUE,
by = "mac")
remove(id_1_2_matched)
View(f6_id_1_2_matched)
View(f3_WiFi_rename_miyajima_200528fin)
f4_WIFI_LOUVRE_TRUE <- read_excel(
paste0(source, "Rooms.Access.Points/WIFI_LOUVRE_TRUE.xlsx")
) %>%
rename(
id_ap_2 = Borne,
mac = "MAC ETH",
mac_radio = "range MAC Radio",
location = "Emplacement")
View(f4_WIFI_LOUVRE_TRUE)
f3_WiFi_rename_miyajima_200528fin <- read_excel(
paste0(
source,
"Rooms.Access.Points/Wi-Fi_rename_miyajima_200528fin.xlsx"
)
) %>%
rename(id_ap_1 = "No.")
f3_WiFi_rename_miyajima_200528fin <- read_excel(
paste0(
source,
"Rooms.Access.Points/Wi-Fi_rename_miyajima_200528fin.xlsx"
)
) %>%
rename(id_ap_1 = "No.") %>%
select(c(id_ap_1, memo, mac))
48:C0:93:0E:D7:96
library(stringr)
install.packages("stringr")
library(stringr)
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(mac = str_split_fixed(mac_radio, "-", 1))
f4_WIFI_LOUVRE_TRUE <- read_excel(
paste0(source, "Rooms.Access.Points/WIFI_LOUVRE_TRUE.xlsx")
) %>%
rename(
id_ap_2 = Borne,
mac_eth = "MAC ETH",
mac_radio = "range MAC Radio",
location = "Emplacement") %>%
select(c(id_ap_2, mac_eth, mac_radio, location))
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(mac = str_split_fixed(mac_radio, "-", 1))
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(mac = str_split_fixed(f4_WIFI_LOUVRE_TRUE$mac_radio, "-", 1))
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(mac = str_split_fixed(f4_WIFI_LOUVRE_TRUE$mac_radio, "-", 2))
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(mac = str_split_fixed(f4_WIFI_LOUVRE_TRUE$mac_radio, "-", 2)) %>%
rename(mac = "mac[,1]")
summary(f4_WIFI_LOUVRE_TRUE)
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(mac = str_split_fixed(f4_WIFI_LOUVRE_TRUE$mac_radio, "-", 2)) %>%
rename(mac = "mac.V1")
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(mac = str_split_fixed(f4_WIFI_LOUVRE_TRUE$mac_radio, "-", 2)) %>%
rename(mac = mac.V1)
summarise(f4_WIFI_LOUVRE_TRUE
)
summary(f4_WIFI_LOUVRE_TRUE)
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(mac = str_split_fixed(f4_WIFI_LOUVRE_TRUE$mac_radio, fixed("-"), 2)) %>%
rename(mac = mac.V1)
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(mac = str_split_fixed(f4_WIFI_LOUVRE_TRUE$mac_radio, fixed("-"), 2))
f4_WIFI_LOUVRE_TRUE$mac
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
separate(mac_radio, c("mac", "other"), "-")
library(dplyr)
library(tidyr)
install.packages("tidyr")
install.packages("Rtools")
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
separate(mac_radio, c("mac", "other"), "-")
library(tidyr)
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
separate(mac_radio, c("mac", "other"), "-")
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(new_mac = mac_radio) %>%
separate(new_mac, c("mac", "other"), "-")
f4_WIFI_LOUVRE_TRUE <- read_excel(
paste0(source, "Rooms.Access.Points/WIFI_LOUVRE_TRUE.xlsx")
) %>%
rename(
id_ap_2 = Borne,
mac_eth = "MAC ETH",
mac_radio = "range MAC Radio",
location = "Emplacement") %>%
select(c(id_ap_2, mac_eth, mac_radio, location))
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(new_mac = mac_radio) %>%
separate(new_mac, c("mac", "other"), "-")
toupper("48c")
## f4 --> mac_radio: 48:c0:93:00:42:28-00:42:37
## f3 --> mac:       48:C0:93:00:42:28
## f3 + f4 = mac_radio until dash
f4_WIFI_LOUVRE_TRUE <- f4_WIFI_LOUVRE_TRUE %>%
mutate(new_mac = mac_radio) %>%
separate(new_mac, c("mac", "other"), "-") %>%
mutate(mac = toupper(mac))
# merge by mac id
f6_id_1_2_matched <- merge(
f3_WiFi_rename_miyajima_200528fin,
f4_WIFI_LOUVRE_TRUE,
by = "mac")
# user data --------------------------------------------------------------------
f5A_Louvre_MIT_1_2018 <- read_csv(
paste0(source,"Users.Locations/Louvre_MIT(1-2018)_v3.csv"))
install.packages("bit64")
library(bit64)
# user data --------------------------------------------------------------------
f5A_Louvre_MIT_1_2018 <- read_csv(
paste0(source,"Users.Locations/Louvre_MIT(1-2018)_v3.csv"))
f5A_Louvre_MIT_1_2017_11 <- read_csv(
paste0(url,"Users.Locations/Louvre_MIT(11-2017)_v1.csv"))
f5A_Louvre_MIT_1_2017_11 <- read_csv(
paste0(source,"Users.Locations/Louvre_MIT(11-2017)_v1.csv"))
f5A_Louvre_MIT_1_2017_12 <- read_csv(
paste0(source,"Users.Locations/Louvre_MIT(12-2017)_v2.csv"))
f5_Louvre_MIT_ <- rbind(
f5A_Louvre_MIT_1_2018,
f5A_Louvre_MIT_1_2017_11,
f5A_Louvre_MIT_1_2017_12)
View(f5A_Louvre_MIT_1_2018)
View(f5A_Louvre_MIT_1_2017_12)
View(f5A_Louvre_MIT_1_2017_11)
# user data --------------------------------------------------------------------
f5A_Louvre_MIT_1_2018 <- read_csv(
paste0(source,"Users.Locations/Louvre_MIT(1-2018)_v3.csv"))
View(f5A_Louvre_MIT_1_2018)
View(f5A_Louvre_MIT_1_2017_12)
View(f5A_Louvre_MIT_1_2017_11)
f5A_Louvre_MIT_1_2017_11 <- read_csv(
paste0(source,"Users.Locations/Louvre_MIT(11-2017)_v1.csv"))
f5A_Louvre_MIT_1_2017_11 <- read_csv(
paste0(source,"Users.Locations/Louvre_MIT(11-2017)_v1.csv"))
f5_Louvre_MIT_ <- rbind(
f5A_Louvre_MIT_1_2018,
f5A_Louvre_MIT_1_2017_11,
f5A_Louvre_MIT_1_2017_12)
remove(
f5A_Louvre_MIT_1_2017_11,
f5A_Louvre_MIT_1_2017_12,
f5A_Louvre_MIT_1_2018)
f5_Louvre_MIT_ <- rbind(
f5A_Louvre_MIT_1_2018,
f5A_Louvre_MIT_1_2017_11,
f5A_Louvre_MIT_1_2017_12) %>%
mutate(
user_id = ID,
id_ap_2 = ACCESS_POINT_HOSTNAME,
ip_address = ACCESS_POINT_IP_ADDRESS,
date = DATE,
start = TIME_DEB,
end = TIME_END,
duration = TIME_DUR,
weekday = WEEKDAY
)
f5_Louvre_MIT_ <- f5_Louvre_MIT_ %>% mutate(
user_id = ID,
id_ap_2 = ACCESS_POINT_HOSTNAME,
ip_address = ACCESS_POINT_IP_ADDRESS,
date = DATE,
start = TIME_DEB,
end = TIME_END,
duration = TIME_DUR,
weekday = WEEKDAY
)
View(f5_Louvre_MIT_)
f5A_Louvre_MIT_1_2017_11 <- read_csv(
paste0(source,"Users.Locations/Louvre_MIT(11-2017)_v1.csv"))
f5A_Louvre_MIT_1_2017_12 <- read_csv(
paste0(source,"Users.Locations/Louvre_MIT(12-2017)_v2.csv"))
f5A_Louvre_MIT_1_2018 <- read_csv(
paste0(source,"Users.Locations/Louvre_MIT(1-2018)_v3.csv"))
f5_Louvre_MIT <- rbind(
f5A_Louvre_MIT_1_2018,
f5A_Louvre_MIT_1_2017_11,
f5A_Louvre_MIT_1_2017_12) %>%
rename(
user_id = ID,
id_ap_2 = ACCESS_POINT_HOSTNAME,
ip_address = ACCESS_POINT_IP_ADDRESS,
date = DATE,
start = TIME_DEB,
end = TIME_END,
duration = TIME_DUR,
weekday = WEEKDAY
)
remove(f5_Louvre_MIT_)
## f8 = f5 + f6
# pick single names of the id_ap_2
f7_ap_ids <- f5_Louvre_MIT %>%
group_by(id_ap_2) %>%
tally()
View(f7_ap_ids)
## f8 = f5 + f6
# pick single names of the id_ap_2
f7_ap_ids <- f5_Louvre_MIT %>%
group_by(id_ap_2) %>%
tally() %>%
mutate(id_ap_3 = nrow())
## f8 = f5 + f6
# pick single names of the id_ap_2
f7_ap_ids <- f5_Louvre_MIT %>%
group_by(id_ap_2) %>%
tally() %>%
mutate(id_ap_3 = nrow)
## f8 = f5 + f6
# pick single names of the id_ap_2
f7_ap_ids <- f5_Louvre_MIT %>%
group_by(id_ap_2) %>%
tally() %>%
mutate(id_ap_3 = row_number())
## f8 = f5 + f6
# pick single names of the id_ap_2
f7_ap_ids <- f5_Louvre_MIT %>%
group_by(id_ap_2) %>%
tally() %>%
mutate(id_ap_3 = row_number()) %>%
select(c(id_ap_2, id_ap_3))
f8_rooms_ap_ids <- merge(
f6_id_1_2_matched,
f7_ap_ids,
by = "id_ap_2"
)
View(f8_rooms_ap_ids)
f8_rooms_ap_ids <- merge(
f6_id_1_2_matched,
f7_ap_ids,
by = "id_ap_2",
all=T
)
f6_id_1_2_matched <- merge(
f3_WiFi_rename_miyajima_200528fin,
f4_WIFI_LOUVRE_TRUE,
by = "mac",
all=T)
View(f6_id_1_2_matched)
f6_total <- length(f6_id_1_2_matched)
f6_total
f6_total <- nrow(f6_id_1_2_matched)
# count missmatches
f6_id_1_2_matched <- f6_id_1_2_matched %>%
drop_na()
message(f6_total - f6_id_1_2_matched, " out of ", f6_total, " lost")
message(paste0(f6_total - f6_id_1_2_matched, " out of ", f6_total, " lost"))
message(paste0(f6_total - nrow(f6_id_1_2_matched), " out of ", f6_total, " lost"))
message(paste0(f6_total - nrow(f6_id_1_2_matched), " out of ", f6_total, " access points lost"))
remove(f6_total)
f8_rooms_ap_ids <- merge(
f6_id_1_2_matched,
f7_ap_ids,
by = "id_ap_2",
all=T
)
f8_total <- nrow(f8_rooms_ap_ids)
f8_rooms_ap_ids <- f8_rooms_ap_ids %>%
drop_na()
message(
paste0(
f8_total - nrow(f8_rooms_ap_ids),
" out of ",
f8_total,
" access points lost")
)
remove(f8_total)
View(f8_rooms_ap_ids)
f8_rooms_ap_ids <- merge(
f8_rooms_ap_ids,
f2_Louvre_network_Wi_Fi_miyajima_200528fin,
by = "id_ap_1"
)
select(c(id_ap_3, Room_Number, location)
)
f9_ap_rooms <- f8_rooms_ap_ids %>%
select(c(id_ap_3, Room_Number, location))
View(f9_ap_rooms)
id_room <- f8_rooms_ap_ids %>%
select(c(id_ap_2, id_ap_3))
f5_Louvre_MIT <- merge(
f5_Louvre_MIT,
id_room,
by = "id_ap_2",
all = T
)
f5_total <- 0
createUser <- function(data) {
data <- data %>%
rename(
user_id = ID,
id_ap_2 = ACCESS_POINT_HOSTNAME,
ip_address = ACCESS_POINT_IP_ADDRESS,
date = DATE,
start = TIME_DEB,
end = TIME_END,
duration = TIME_DUR,
weekday = WEEKDAY
)
data <- merge(
data,
id_room,
by = "id_ap_2",
all = T
)
f5_total <- f5_total + nrow(data)
data
}
f10_Louvre_MIT_1_2017_11 <- createUser(f5A_Louvre_MIT_1_2017_11)
View(f10_Louvre_MIT_1_2017_11)
nrow(f10_Louvre_MIT_1_2017_11)
remove(f5_Louvre_MIT)
f10_Louvre_MIT_1_2017_12 <- createUser(f5A_Louvre_MIT_1_2017_12)
