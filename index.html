<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tokyo Streets</title>
    <meta name="author" content="University of Tokyo">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
    <link rel="stylesheet" href="./libraries/bootstrap/bootstrap.min.css">
    <!-- Google fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,600;1,400&family=Noto+Serif:ital,wght@0,500;0,700;1,500;1,600&display=swap" rel="stylesheet">
    <link href="./app/app.css" rel="stylesheet"/>
    <link href="./app/network/network.css" rel="stylesheet"/>
    <link href="./app/controls/controls.css" rel="stylesheet"/>
    <link href="./app/barTable/barTable.css" rel="stylesheet"/>
    <link href="./app/blueprint/blueprint.css" rel="stylesheet"/>
</head>
<body>
    <nav id="top">
        <a class="col-md-12" href="https://urbansciences.jp" target="_blank">
            The University of Tokyo | Urban Sciences Lab
        </a>
    </nav>
    <header class="container">
        <h1>A promenade through</br>the Louvre</h1>
        <p class="description">
            Studying visitors movement's using WiFi Tracking data
        </p>
        <p class="standfirst">
            WiFi tracking is a valuable tool used in various settings to 
            understand pedestrian behavior. This research employed WiFi 
            tracking at the Louvre Museum for four months, from November 
            2017 to February 2018, to obtain the location of visitors and 
            make some observations.
        </p>    
    </header>
    <div class="container">
        <!-- section 1 -->
        <div class="section" id="section-blueprint">
            <div class="info">
                <h2>
                    Explore visitorâ€™s trajectories using the
                    <span class="italic">Louvre's blueprint</span>
                </h2>
                <div class="legend legend-blueprint" aria-hidden="true">
                    <div class="item item-1">
                        <svg width="23" height="11" viewBox="0 0 23 11" 
                        fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 2H23" stroke-width="3"/>
                            <path d="M0 10H23"/>
                        </svg>
                        <p>
                            Total number of visitors that went from one room 
                            to another
                        </p>
                    </div>
                    <div class="item item-2">
                        <svg width="2" height="2" viewBox="0 0 4 4" fill="none" 
                        xmlns="http://www.w3.org/2000/svg">
                            <path d="M2 4C3.10457 4 4 3.10457 4 2C4 0.89543 3.10457 0 2 0C0.89543 0 0 0.89543 0 2C0 3.10457 0.89543 4 2 4Z"/>
                        </svg>
                        <p>Untracked rooms</p>
                    </div>
                    <div class="item item-3">
                        <p>Colors indicate the start of the trajectory</p>
                    </div>
                </div>
            </div>
            <div class="visual">
                <div id="blueprint" class="plot"></div>
                <div class="non-sticky">
                    <div class="controls-wrapper accordion"
                        id="accordionBlueprint">
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="heading3D">
                                <button
                                    class="accordion-button"
                                    type="button"
                                    role="button"
                                    value="3d"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#collapse3D"
                                    aria-expanded="true"
                                    aria-controls="collapse3D">
                                    Isometric view
                                </button>
                            </h2>
                            <div
                                id="collapse3D"
                                class="accordion-collapse collapse show"
                                aria-labelledby="heading3D"
                                data-bs-parent="#accordionBlueprint">
                                <div class="accordion-body">
                                    <p class="small">
                                        Movements across floors available.
                                    </p>
                                    <p>
                                        Highlight trajectories that start
                                        in a given floor.
                                    </p>
                                    <form id="blueprint-controls-3d"></form>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                          <h3 class="accordion-header" id="headingTop">
                            <button
                                class="accordion-button collapsed"
                                type="button"
                                role="button"
                                value="top"
                                data-bs-toggle="collapse"
                                data-bs-target="#collapseTop"
                                aria-expanded="false"
                                aria-controls="collapseTop">
                                Top view
                            </button>
                          </h2>
                          <div
                            id="collapseTop"
                            class="accordion-collapse collapse"
                            aria-labelledby="headingTop"
                            data-bs-parent="#accordionBlueprint">
                            <div class="accordion-body">
                                <p class="small">
                                    Only movements within one floor
                                </p>
                                <p>Select floor</p>
                                <form id="blueprint-controls-top"></form>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- section 2 -->
        <div class="section" id="section-network">
            <div class="info">
                <h2>
                    A complex <span class="italic">network</span>
                </h2>
                <p>
                    Human flows in the Louvre can be represented as a 
                    complex network. Each node represents a room, each 
                    edge express a pedestrian flow.
                </p>
                <div class="legend legend-network" aria-hidden="true">
                    <div class="item item-1">
                        <svg width="38" height="24" viewBox="0 0 38 24" 
                            fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="11.5" fill="white"/>
                            <circle cx="33" cy="12" r="4.5" fill="white"/>
                        </svg>
                        <p>Median time visitors stayed in one room</p>
                    </div>
                    <div class="item item-2">
                        <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g filter="url(#filter0_d_105_2069)">
                                <circle cx="23" cy="23" r="8" fill="var(--grey)"/>
                                <circle cx="23" cy="23" r="8.75" stroke="white" stroke-width="1.5"/>
                            </g>
                            <defs>
                                <filter id="filter0_d_105_2069" x="0.5" y="0.5" width="45" height="45" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                                    <feOffset/>
                                    <feGaussianBlur stdDeviation="6.5"/>
                                    <feComposite in2="hardAlpha" operator="out"/>
                                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/>
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_105_2069"/>
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_105_2069" result="shape"/>
                                </filter>
                            </defs>
                        </svg>
                        <p>Room with highlighted artwork</p>
                    </div>
                    <div class="item item-3">
                            <svg width="23" height="11" viewBox="0 0 23 11" 
                            fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 2H23" stroke-width="3"/>
                                <path d="M0 10H23"/>
                            </svg>
                        <p>
                            Total number of visitors that went from one room 
                            to another
                        </p>
                    </div>
                </div>
            </div>
            <div class="visual">
                <div id="network" class="plot">
                    <div class="tooltip-info" id="network-tooltip">
                        <p>Rooms: <span class="room"></span></p>
                        <p>Highlight: <span class="highlight"></span></p>
                        <p>Median visit duration: 
                            <span class="time"></span>
                            minutes
                        </p>
                        <div class="tooltip-end">
                            <div class="arrow"></div>
                        </div>
                    </div>
                </div>
                <div class="non-sticky">
                    <div class="controls-wrapper">
                        <div class="controls">
                            <div class="legend" aria-hidden="true">
                                <div class="item mouse">
                                    <img class="hand" src="assets/img/hand.svg">
                                    <p>
                                        Mouse over the circles to get 
                                        information about the museum rooms
                                    </p>
                                </div>
                            </div>
                            <label>Highlight source rooms</label>
                            <form id="network-controls"></form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- section 3 -->
        <div class="section" id="section-bar">
            <div class="info">
                <h2>
                    Number of visitors by <span class="italic">trajectory</span>
                </h2>
                <p>
                    Explore the number of visitors that went from one room 
                    of the museum to another.
                </p>
            </div>
            <div class="visual">
                <div class="table-divs">
                    <div class="the-table collapsed">
                        <table id="visitors-by-trajectory-table"
                            class="table table-striped table-sm"
                            cellspacing="0" width="100%">
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="t-shadow"></div>
                </div>
                <div class="non-sticky">
                    <div class="controls-wrapper">
                        <div class="controls">
                            <label>Filter source rooms</label>
                            <form id="table-divs-controls"></form>
                            <!-- <button id="expandTable" value="collapsed">
                                See full list
                            </button> -->
                           <form>
                                <label class="toggleHeight" id="expandTable">
                                    <input 
                                        type="checkbox"
                                        name="table-divs_toggleHeight"
                                        aria-checked="false"
                                        aria-hidden="true">
                                    <span>Expand table</span>
                                </label>
                           </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- section 4 -->
        <div class="section" id="section-considerations">
            <h2>Considerations</h2>
            <p>
                It is important to consider the following limitations 
                regarding WiFi data:
            </p>
            <ul>
                <li>
                    The WiFi coverage area is large, and the boundary is vague. 
                    Sometimes people in the rooms next door are caught.
                </li>
                <li>
                    Some areas are not covered. For example, room 711, where 
                    the Mona Lisa is displayed, does not have a Wi-Fi 
                    access point.
                </li>
                <li>
                    Some WiFi access points are available in several
                    floors at once. Colors represent floor levels
                    that appear the most often given one trajectory.
                </li>
                <li>
                    The device settings, such as having the wireless option 
                    enabled or disabled, affects the result. 
                </li>
                <li>
                    People with multiple devices connected to the Wi-Fi 
                    are counted multiple times.
                </li>
            </ul>
        </div>
        <div class="section" id="end">
            <a href="#top"
            class="btn btn-primary btn-lg active"
            role="button"
            aria-pressed="true">
            Go back to top
        </a>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="col-md-1">
                <a href="https://urbansciences.jp" target="_blank" aria-label="Go to Urban Sciences website">
                    <img class="logo_usl" src="assets/img/usl_logo.svg" aria-hidden="true">
                </a>
            </div>
            <div class="col-md-10 authors">
                <h2>Team</h2>
                <p class="author">Yuji Yoshimura <span class="position">Principal Investigator</span></p>
                <p class="author">
                    Daniel Kondor 
                    <span class="position">External Researcher, </span>
                    <a href="https://www.csh.ac.at/"
                        target="_blank"
                        class ="university">
                        Complexity Science Hub Vienna
                    </a>
                </p>
                <p class="author">Irene de la Torre Arenas <span class="position">Visualization</span></p>
                <p class="author">
                    Mizuki Yamauchi
                    <span class="position">Researcher</span>
                </p>
                </br>
                <a class="lab" href="https://urbansciences.jp" target="_blank">
                    Urban Sciences Lab
                </a>
                </br>
                <a href="https://urbansciences.jp" target="_blank" aria-label="Go to University of Tokyo Website">
                    <img class="logo_uni" src="assets/img/UnivOfTokyo_logo.svg" aria-hidden="true">
                </a>
            </div>
        </div>
    </footer>
    <script src="./libraries/bootstrap/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script src="./libraries/d3/d3.v7.min.js"></script>
    <script src="./libraries/d3/forceInABox.js"></script>
    <!-- <script src="./libraries/p5/p5.min.js"></script> -->
    <script src="./app/parseData.js"></script>
    <script src="./app/network/clean_network.js"></script>
    <script src="./app/network/network.js"></script>
    <script src="./app/controls/controls.js"></script>
    <script src="./app/barTable/barTable.js"></script>
    <script src="./app/barTable/controlHeight.js"></script>
    <script src="./app/blueprint/blueprint.js"></script>
    <script src="./app/app.js"></script>
</body>
</html>